<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Login Loja Premium</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">

<style>
*{margin:0;padding:0;box-sizing:border-box}
body{
 font-family:'Poppins',sans-serif;
 background:#0f0f0f;
 color:#fff;
 display:flex;
 justify-content:center;
 align-items:center;
 min-height:100vh;
 overflow:hidden;
 transition:.3s;
}
.backBtn{
 position:fixed;
 top:20px;
 left:20px;
 padding:8px 14px;
 border:none;
 border-radius:12px;
 cursor:pointer;
 background:#222;
 color:#fff;
 font-weight:600;
 z-index:1000;
}
.themeToggle{
 position:fixed;
 bottom:20px;
 left:20px;
 padding:8px 14px;
 border:none;
 border-radius:12px;
 cursor:pointer;
 background:#8e2de2;
 color:#fff;
 font-weight:600;
 z-index:1000;
}
canvas{position:fixed;inset:0;z-index:-1}
.logo{text-align:center;font-size:28px;font-weight:700;margin-bottom:15px;color:#8e2de2}
.card{
 backdrop-filter:blur(15px);
 background:rgba(255,255,255,.06);
 padding:30px;
 border-radius:20px;
 width:360px;
 transition:.3s;
}
.card input{
 width:100%;
 padding:12px;
 margin:10px 0;
 border-radius:12px;
 border:none;
 background:#111;
 color:white;
}
.card button{
 width:100%;
 padding:12px;
 background:#8e2de2;
 color:white;
 border:none;
 border-radius:12px;
 font-weight:600;
 cursor:pointer;
 margin-top:15px;
}
p{text-align:center;margin-top:10px}
.strength{height:8px;background:#333;border-radius:10px}
.strength div{height:100%;width:0%;border-radius:10px}
.toast{
 position:fixed;
 top:20px;
 right:-300px;
 padding:15px 20px;
 background:#222;
 color:#fff;
 border-left:4px solid #8e2de2;
 border-radius:10px;
 transition:.5s;
}
.toast.show{right:20px}

/* Modo Claro */
body.light{
 background:#f0f0f0;
 color:#111;
}
body.light .card{
 background:rgba(255,255,255,.9);
 color:#111;
}
body.light .card input{
 background:#eee;
 color:#111;
}
body.light .toast{
 background:#fff;
 color:#111;
 border-left:4px solid #8e2de2;
}
</style>
</head>

<body>

<button class="backBtn" onclick="voltarSite()">‚¨Ö Voltar</button>
<button class="themeToggle" onclick="toggleTheme()">üåô / ‚òÄÔ∏è</button>

<canvas id="particles"></canvas>
<div class="toast" id="toast"></div>

<!-- LOGIN -->
<div class="card" id="loginCard">
 <div class="logo">Loja Premium ‚ú¶</div>
 <input id="username" placeholder="Usu√°rio">
 <input type="password" id="password" placeholder="Senha">
 <label><input type="checkbox" id="autoLogin"> Login autom√°tico</label>
 <button onclick="login()">Entrar</button>
 <p id="errorLogin" style="color:#ff4b2b"></p>
 <p><a onclick="showCadastro()" style="cursor:pointer">Cadastre-se</a></p>
</div>

<!-- CADASTRO -->
<div class="card" id="cadastroCard" style="display:none">
 <div class="logo">Criar Conta ‚ú¶</div>
 <input id="newUser" placeholder="Usu√°rio">
 <input type="password" id="newPass" placeholder="Senha">
 <input id="newEmail" placeholder="E-mail">
 <input id="newCPF" placeholder="CPF">
 <input id="newPhone" placeholder="Telefone">
 <input id="newAddress" placeholder="Endere√ßo">
 <div class="strength"><div id="strengthBar"></div></div>
 <p id="senhaDica"></p>
 <button onclick="cadastrar()">Cadastrar</button>
 <p id="erroCadastro" style="color:red"></p>
 <p><a onclick="showLogin()" style="cursor:pointer">Voltar</a></p>
</div>

<script>
function voltarSite(){
 window.location.href="index.html";
}

/* PARTICLES */
const canvas=document.getElementById("particles"),ctx=canvas.getContext("2d");
canvas.width=innerWidth;canvas.height=innerHeight;
let particles=[...Array(60)].map(()=>({
 x:Math.random()*innerWidth,
 y:Math.random()*innerHeight,
 r:Math.random()*2+1,
 dx:(Math.random()-.5)*.5,
 dy:(Math.random()-.5)*.5
}));
(function animate(){
 ctx.clearRect(0,0,canvas.width,canvas.height);
 particles.forEach(p=>{
  ctx.beginPath();
  ctx.arc(p.x,p.y,p.r,0,Math.PI*2);
  ctx.fillStyle="#8e2de2";
  ctx.fill();
  p.x+=p.dx;p.y+=p.dy;
 });
 requestAnimationFrame(animate);
})();

/* FOR√áA SENHA */
document.getElementById("newPass").addEventListener("input",()=>{
 let p=newPass.value,s=0;
 if(p.length>=6)s++;
 if(/[A-Z]/.test(p))s++;
 if(/[0-9]/.test(p))s++;
 if(/[^A-Za-z0-9]/.test(p))s++;
 strengthBar.style.width=s*25+"%";
 strengthBar.style.background=["red","orange","yellow","#00ff7f"][s-1]||"";
});

/* TOAST */
const toastEl=document.getElementById("toast");
function toast(m){
 toastEl.innerText=m;
 toastEl.classList.add("show");
 setTimeout(()=>toastEl.classList.remove("show"),2000);
}

/* CADASTRO */
function cadastrar(){
 let u = newUser.value.trim();
 let p = newPass.value.trim();

 if(!u || !p){
  erroCadastro.innerText="Preencha usu√°rio e senha";
  return;
 }

 let users = JSON.parse(localStorage.getItem("users")) || [];

 if(users.find(x=>x.user===u)){
  erroCadastro.innerText="Usu√°rio j√° existe";
  return;
 }

 users.push({user:u,pass:p});
 localStorage.setItem("users",JSON.stringify(users));

 erroCadastro.innerText="";
 toast("Cadastro feito ‚úî");

 showLogin();
 username.value=u;
 password.value=p;
}

/* LOGIN ‚Üí LOJA */
function login(){
 let u=username.value.trim();
 let p=password.value.trim();
 let users=JSON.parse(localStorage.getItem("users"))||[];
 let ok=users.find(x=>x.user===u&&x.pass===p);

 if(!ok){
  errorLogin.innerText="Usu√°rio ou senha inv√°lidos";
  return;
 }

 if(autoLogin.checked){
  localStorage.setItem("autologinUser",u);
 }

 window.location.href="loja.html";
}

/* AUTOLOGIN */
if(localStorage.getItem("autologinUser")){
 window.location.href="loja.html";
}

/* TELAS */
function showCadastro(){
 loginCard.style.display="none";
 cadastroCard.style.display="block";
}
function showLogin(){
 cadastroCard.style.display="none";
 loginCard.style.display="block";
}

/* MODO CLARO/ESCURO */
const currentTheme = localStorage.getItem("theme");
if(currentTheme === "light") document.body.classList.add("light");

function toggleTheme(){
 document.body.classList.toggle("light");
 let theme = document.body.classList.contains("light") ? "light" : "dark";
 localStorage.setItem("theme", theme);
}
</script>

</body>
</html>
